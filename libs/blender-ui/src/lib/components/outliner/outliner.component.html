<div class="outliner-container">
  <!-- Header -->
  <div class="outliner-header">
    <button class="header-btn" title="Display Mode">
      <span class="material-symbols-outlined text-sm">view_list</span>
      <span class="material-symbols-outlined text-xs arrow">expand_more</span>
    </button>
    <button class="header-btn" title="View Layer">
      <span class="material-symbols-outlined text-sm">image</span>
      <span class="material-symbols-outlined text-xs arrow">expand_more</span>
    </button>

    <div class="search-box">
      <span class="material-symbols-outlined search-icon">search</span>
      <input type="text" placeholder="Search" class="search-input">
    </div>

    <button class="header-btn" title="Filter">
      <span class="material-symbols-outlined text-sm">filter_alt</span>
      <span class="material-symbols-outlined text-xs arrow">expand_more</span>
    </button>
    <button class="header-btn" title="New Collection">
      <span class="material-symbols-outlined text-sm">create_new_folder</span>
    </button>
  </div>

  <!-- Tree -->
  <div class="outliner-tree-wrapper">
    <cdk-tree [dataSource]="dataSource" [treeControl]="treeControl">

      <!-- Leaf Node -->
      <cdk-nested-tree-node *cdkTreeNodeDef="let node" class="tree-node-wrapper leaf-node-wrapper">
        <div class="tree-node leaf-node"
             [class.selected]="node.selected"
             [class.active]="node.active"
             (click)="selectNode(node)"
             (keydown.enter)="selectNode(node)"
             (keydown.space)="selectNode(node)"
             tabindex="0">

          <button cdkTreeNodeToggle class="toggle-btn invisible" [attr.aria-label]="'Toggle ' + node.name">
              <span class="material-symbols-outlined">arrow_right</span>
          </button>

          <span class="material-symbols-outlined node-type-icon" [ngClass]="node.type">{{ node.icon }}</span>

          <span class="node-name truncate">{{ node.name }}</span>

          <div class="node-controls">
            <span class="material-symbols-outlined control-icon">visibility</span>
            <span class="material-symbols-outlined control-icon">camera_alt</span>
          </div>
        </div>
      </cdk-nested-tree-node>

      <!-- Parent Node -->
      <cdk-nested-tree-node *cdkTreeNodeDef="let node; when: hasChild" class="tree-node-wrapper">
        <div class="tree-node parent-node"
             [class.selected]="node.selected"
             [class.active]="node.active"
             (click)="selectNode(node)"
             (keydown.enter)="selectNode(node)"
             (keydown.space)="selectNode(node)"
             tabindex="0">

          <button cdkTreeNodeToggle class="toggle-btn" [attr.aria-label]="'Toggle ' + node.name">
            <span class="material-symbols-outlined">
              {{ treeControl.isExpanded(node) ? 'arrow_drop_down' : 'arrow_right' }}
            </span>
          </button>

          <span class="material-symbols-outlined node-type-icon" [ngClass]="node.type">{{ node.icon }}</span>

          <span class="node-name truncate">{{ node.name }}</span>

          <div class="node-controls">
            <span class="material-symbols-outlined control-icon">check_box</span>
            <span class="material-symbols-outlined control-icon">visibility</span>
            <span class="material-symbols-outlined control-icon">camera_alt</span>
          </div>
        </div>

        <div class="tree-children" [class.invisible]="!treeControl.isExpanded(node)">
          <div class="tree-line"></div> <!-- Vertical line -->
          <ng-container cdkTreeNodeOutlet></ng-container>
        </div>
      </cdk-nested-tree-node>

    </cdk-tree>
  </div>

  <!-- Footer status -->
  <div class="outliner-footer">
    <span>2 Collections</span>
    <span class="separator">â€¢</span>
    <span>3 Objects</span>
  </div>
</div>
